package AppArcao.Presentacion;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.URL;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

import AppArcao.Negocio.Reserva.TReserva;
import AppArcao.Presentacion.Controlador.Controlador;
import AppArcao.Presentacion.Plaza.VentanaBorrarPlaza;
import AppArcao.Presentacion.Plaza.VentanaBuscarPlaza;
import AppArcao.Presentacion.Plaza.VentanaCrearPlaza;
import AppArcao.Presentacion.Reserva.VentanaBorrarReserva;
import AppArcao.Presentacion.Reserva.VentanaBuscarReserva;
import AppArcao.Presentacion.Reserva.VentanaCrearReserva;
import AppArcao.Presentacion.Socio.VentanaBorrarSocio;
import AppArcao.Presentacion.Socio.VentanaBuscarSocio;
import AppArcao.Presentacion.Socio.VentanaCrearSocio;
import AppArcao.Presentacion.Vehiculo.VentanaBorrarVehiculo;
import AppArcao.Presentacion.Vehiculo.VentanaBuscarVehiculo;
import AppArcao.Presentacion.Vehiculo.VentanaCrearVehiculo;
import AppArcao.Presentacion.Zona.VentanaBorrarZona;
import AppArcao.Presentacion.Zona.VentanaBuscarZona;
import AppArcao.Presentacion.Zona.VentanaCrearZona;

/**
 * 
 * @author Propietario
 */
public class JPrincipal extends javax.swing.JFrame {


	/**
	 * 
	 */
	private static final long serialVersionUID = -7356989246860859103L;
	
	private javax.swing.JMenuItem itemModificaZona;
	private javax.swing.JMenuItem itemListarZonas;
	private javax.swing.JMenuItem itemMostrarZona;
	private javax.swing.JMenuItem itemCrearPlaza;
	private javax.swing.JMenuItem itemListarPlaza;
	private javax.swing.JMenuItem itemMostrarPlaza;
	private javax.swing.JMenuItem itemModificaPlaza;
	private javax.swing.JMenuItem itemBorrarPlaza;
	private javax.swing.JMenuItem itemCrearSocio;
	private javax.swing.JMenuItem itemListarSocios;
	private javax.swing.JMenuItem itemMostrarSocio;
	private javax.swing.JMenuItem itemModificaSocio;
	private javax.swing.JMenuItem itemBorrarSocio;
	private javax.swing.JMenuItem itemCrearReserva;
	private javax.swing.JMenuItem itemListarVehiculos;
	private javax.swing.JMenuItem itemMostrarVehiculo;
	private javax.swing.JMenuItem itemModificaVehiculo;
	private javax.swing.JMenuItem itemBorrarVehiculo;
	private javax.swing.JMenuItem itemCrearVehiculo;
	private javax.swing.JMenuItem itemListarReservas;
	private javax.swing.JMenuItem itemMostrarReserva;
	private javax.swing.JMenuItem itemModificaReserva;
	private javax.swing.JMenuItem itemBorrarReserva;
	private javax.swing.JMenuItem itemActualizarReservas;
	private javax.swing.JMenuItem itemCrearZona;
	private javax.swing.JMenuItem itemBorrarZona;
	private javax.swing.JLabel jLabel1;
	private javax.swing.JMenuBar jMenuBar1;
	private javax.swing.JMenu menuPlazas;
	private javax.swing.JMenu menuReservas;
	private javax.swing.JMenu menuZonas;
	private javax.swing.JMenu menuSocios;
	private javax.swing.JMenu menuVehiculos;

	private static JPrincipal instance = null; //Instancia Singleton
	
	
	public JPrincipal() {
		initComponents();
	}
	
	
	public static JPrincipal getInstance(){
		if(instance == null){
			instance = new JPrincipal();
		}
		return instance;
	}
	
	

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	/**
	 * 
	 */
	private void initComponents() {

		jLabel1 = new javax.swing.JLabel();
		
		jMenuBar1 = new javax.swing.JMenuBar();
		
		menuZonas = new javax.swing.JMenu();
			itemCrearZona = new javax.swing.JMenuItem();
			itemBorrarZona = new javax.swing.JMenuItem();
			itemModificaZona = new javax.swing.JMenuItem();
			itemMostrarZona = new javax.swing.JMenuItem();
			itemListarZonas = new javax.swing.JMenuItem();
		
		menuPlazas = new javax.swing.JMenu();
			itemCrearPlaza = new javax.swing.JMenuItem();
			itemBorrarPlaza = new javax.swing.JMenuItem();
			itemModificaPlaza = new javax.swing.JMenuItem();
			itemMostrarPlaza = new javax.swing.JMenuItem();
			itemListarPlaza = new javax.swing.JMenuItem();
		
		menuSocios = new javax.swing.JMenu();
			itemCrearSocio = new javax.swing.JMenuItem();
			itemBorrarSocio = new javax.swing.JMenuItem();
			itemModificaSocio = new javax.swing.JMenuItem();
			itemMostrarSocio = new javax.swing.JMenuItem();
			itemListarSocios = new javax.swing.JMenuItem();
			
		menuVehiculos = new javax.swing.JMenu();
			itemCrearVehiculo = new javax.swing.JMenuItem();
			itemBorrarVehiculo = new javax.swing.JMenuItem();
			itemModificaVehiculo = new javax.swing.JMenuItem();
			itemMostrarVehiculo = new javax.swing.JMenuItem();
			itemListarVehiculos = new javax.swing.JMenuItem();
		
		menuReservas = new javax.swing.JMenu();
			itemCrearReserva = new javax.swing.JMenuItem();
			itemBorrarReserva = new javax.swing.JMenuItem();
			itemModificaReserva = new javax.swing.JMenuItem();
			itemMostrarReserva = new javax.swing.JMenuItem();
			itemListarReservas = new javax.swing.JMenuItem();
			itemActualizarReservas = new javax.swing.JMenuItem();

		setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
		setResizable(false);
		addWindowListener(new java.awt.event.WindowAdapter() {
			@Override
			public void windowActivated(java.awt.event.WindowEvent evt) {
				formWindowActivated(evt);
			}
		});

	
		//********* Creacion del label para el logo ***********
		jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
		jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("logo.png")));
		getContentPane().add(jLabel1);

		this.setBackground(Color.WHITE);
		
		
		//******** inicializar los elementos de los menus y a√±adir el manejador de eventos *********
		OyenteJPrincipal oyenteJPrincipal = new OyenteJPrincipal();

		menuZonas.setText("Zonas");
		{
			itemCrearZona.setText("Crear zona");
			itemCrearZona.addActionListener(oyenteJPrincipal);
			menuZonas.add(itemCrearZona);
	
			itemModificaZona.setText("Modificar zona");
			itemModificaZona.addActionListener(oyenteJPrincipal);
			menuZonas.add(itemModificaZona);
			
			itemBorrarZona.setText("Borrar zona");
			itemBorrarZona.addActionListener(oyenteJPrincipal);
			menuZonas.add(itemBorrarZona);
			
			itemMostrarZona.setText("Mostrar zona");
			itemMostrarZona.addActionListener(oyenteJPrincipal);
			menuZonas.add(itemMostrarZona);
			
			itemListarZonas.setText("Listar zonas");
			itemListarZonas.addActionListener(oyenteJPrincipal);
			menuZonas.add(itemListarZonas);
	
			jMenuBar1.add(menuZonas);
		}
		
		
		menuPlazas.setText("Plazas");
		{
			itemCrearPlaza.setText("Crear plaza");
			itemCrearPlaza.addActionListener(oyenteJPrincipal);
			menuPlazas.add(itemCrearPlaza);
			
			itemBorrarPlaza.setText("Borrar plaza");
			itemBorrarPlaza.addActionListener(oyenteJPrincipal);
			menuPlazas.add(itemModificaPlaza);
			
			itemModificaPlaza.setText("Modificar plaza");
			itemModificaPlaza.addActionListener(oyenteJPrincipal);
			menuPlazas.add(itemBorrarPlaza);
			
			itemMostrarPlaza.setText("Mostrar plaza");
			itemMostrarPlaza.addActionListener(oyenteJPrincipal);
			menuPlazas.add(itemMostrarPlaza);
			
			itemListarPlaza.setText("Listar plazas");
			itemListarPlaza.addActionListener(oyenteJPrincipal);
			menuPlazas.add(itemListarPlaza);
	
			jMenuBar1.add(menuPlazas);
		}
		
		menuSocios.setText("Socios");
		{
			itemCrearSocio.setText("Crear socio");
			itemCrearSocio.addActionListener(oyenteJPrincipal);
			
			menuSocios.add(itemCrearSocio);
			itemBorrarSocio.setText("Borrar socio");
			itemBorrarSocio.addActionListener(oyenteJPrincipal);
			menuSocios.add(itemModificaSocio);
			
			itemModificaSocio.setText("Modificar socio");
			itemModificaSocio.addActionListener(oyenteJPrincipal);
			menuSocios.add(itemBorrarSocio);
			
			itemMostrarSocio.setText("Mostrar socio");
			itemMostrarSocio.addActionListener(oyenteJPrincipal);
			menuSocios.add(itemMostrarSocio);
			
			itemListarSocios.setText("Listar socios");
			itemListarSocios.addActionListener(oyenteJPrincipal);
			menuSocios.add(itemListarSocios);
	
			jMenuBar1.add(menuSocios);
		}
		
		menuVehiculos.setText("Vehiculo");
		{
			itemCrearVehiculo.setText("Crear vehiculo");
			itemCrearVehiculo.addActionListener(oyenteJPrincipal);
			menuVehiculos.add(itemCrearVehiculo);
			
			itemBorrarVehiculo.setText("Borrar vehiculo");
			itemBorrarVehiculo.addActionListener(oyenteJPrincipal);
			menuVehiculos.add(itemModificaVehiculo);
	
			itemModificaVehiculo.setText("Modificar vehiculo");
			itemModificaVehiculo.addActionListener(oyenteJPrincipal);
			menuVehiculos.add(itemBorrarVehiculo);
			
			itemMostrarVehiculo.setText("Mostrar vehiculo");
			itemMostrarVehiculo.addActionListener(oyenteJPrincipal);
			menuVehiculos.add(itemMostrarVehiculo);
			
			itemListarVehiculos.setText("Listar vehiculo");
			itemListarVehiculos.addActionListener(oyenteJPrincipal);
			menuVehiculos.add(itemListarVehiculos);
	
			jMenuBar1.add(menuVehiculos);
		}
		
		menuReservas.setText("Reservas");
		{
			itemCrearReserva.setText("Crear reserva");
			itemCrearReserva.addActionListener(oyenteJPrincipal);
			menuReservas.add(itemCrearReserva);
			
			itemBorrarReserva.setText("Borrar reserva");
			itemBorrarReserva.addActionListener(oyenteJPrincipal);
			menuReservas.add(itemModificaReserva);
			
			itemModificaReserva.setText("Modificar reserva");
			itemModificaReserva.addActionListener(oyenteJPrincipal);
			menuReservas.add(itemBorrarReserva);
			
			itemMostrarReserva.setText("Mostrar reserva");
			itemMostrarReserva.addActionListener(oyenteJPrincipal);
			menuReservas.add(itemMostrarReserva);
			
			itemListarReservas.setText("Listar reservas");
			itemListarReservas.addActionListener(oyenteJPrincipal);
			menuReservas.add(itemListarReservas);
			
			itemActualizarReservas.setText("Actualizar reservas");
			itemActualizarReservas.addActionListener(oyenteJPrincipal);
			menuReservas.add(itemActualizarReservas);
	
			jMenuBar1.add(menuReservas);
		}
		
		setJMenuBar(jMenuBar1);

		pack();

		setSize(new Dimension(500, 368));
		setLocationRelativeTo(null);
	}


	private void formWindowActivated(java.awt.event.WindowEvent evt) {
		
		String path = "logo.png";

		URL url = this.getClass().getResource(path);
		ImageIcon fot = new ImageIcon(url);
		Icon icono = new ImageIcon(fot.getImage().getScaledInstance(jLabel1.getWidth()-10, jLabel1.getHeight()-10, Image.SCALE_DEFAULT));
		jLabel1.setIcon(icono);
		this.repaint();
	}

	public static void main(String args[]) {
		
	try {
			for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager
					.getInstalledLookAndFeels()) {
				if ("Nimbus".equals(info.getName())) {
					javax.swing.UIManager.setLookAndFeel(info.getClassName());
					break;
				}
			}
		} catch (ClassNotFoundException ex) {
			java.util.logging.Logger.getLogger(JPrincipal.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		} catch (InstantiationException ex) {
			java.util.logging.Logger.getLogger(JPrincipal.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		} catch (IllegalAccessException ex) {
			java.util.logging.Logger.getLogger(JPrincipal.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		} catch (javax.swing.UnsupportedLookAndFeelException ex) {
			java.util.logging.Logger.getLogger(JPrincipal.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		}
		// </editor-fold>

		/* Create and display the form */
		java.awt.EventQueue.invokeLater(new Runnable() {
			@Override
			public void run() {
				new JPrincipal().setVisible(true);
			}
		});

	}

	public class OyenteJPrincipal implements ActionListener {

		@Override
		public void actionPerformed(ActionEvent event) {
			// begin-user-code

			
			//************* ITEMS ZONA *************
			if (event.getSource() == itemCrearZona) {

				JPrincipal.this.setVisible(false);
				VentanaCrearZona.getInstance().setVisible(true);

			}

			if (event.getSource() == itemBorrarZona) {

				JPrincipal.this.setVisible(false);
				VentanaBorrarZona.getInstance().setVisible(true);

			}
			if (event.getSource() == itemModificaZona) {

				JPrincipal.this.setVisible(false);
				VentanaBuscarZona.getInstance().setTipoEventoGUI(EventoGUI.BUSCA_ZONA_PARA_MODIFICAR);
				VentanaBuscarZona.getInstance().estadoVentanaInicial();
				VentanaBuscarZona.getInstance().setVisible(true);

			}
			if (event.getSource() == itemMostrarZona) {
				JPrincipal.this.setVisible(false);
				VentanaBuscarZona.getInstance().setTipoEventoGUI(EventoGUI.BUSCAR_ZONA);
				VentanaBuscarZona.getInstance().estadoVentanaInicial();
				VentanaBuscarZona.getInstance().setVisible(true);

			}
			if (event.getSource() == itemListarZonas) {

				JPrincipal.this.setVisible(false);
				Controlador.getInstance().action(EventoNegocio.LISTAR_ZONAS, null);

			}
			
			//************* ITEMS PLAZA *************
			
			if(event.getSource() == itemBorrarPlaza){
				JPrincipal.this.setVisible(false);
				VentanaBorrarPlaza.getInstance().setVisible(true);
				
			}
			
			
			if (event.getSource() == itemCrearPlaza) {

				JPrincipal.this.setVisible(false);
				VentanaCrearPlaza.getInstance().setVisible(true);

			}

			if (event.getSource() == itemModificaPlaza) {

				JPrincipal.this.setVisible(false);
				VentanaBuscarPlaza.getInstance().setTipoEventoGUI(EventoGUI.BUSCA_PLAZA_PARA_MODIFICAR);
				VentanaBuscarPlaza.getInstance().estadoVentanaInicial();
				VentanaBuscarPlaza.getInstance().setVisible(true);

			}
			if (event.getSource() == itemMostrarPlaza) {
				JPrincipal.this.setVisible(false);
				VentanaBuscarPlaza.getInstance().setTipoEventoGUI(EventoGUI.BUSCAR_PLAZA);
				VentanaBuscarPlaza.getInstance().estadoVentanaInicial();
				VentanaBuscarPlaza.getInstance().setVisible(true);

			}
			if (event.getSource() == itemListarPlaza) {

				JPrincipal.this.setVisible(false);
				Controlador.getInstance().action(EventoNegocio.LISTAR_PLAZAS, null);

			}
			
		//*******************EVENTOS DE VEHICULO*******************
		//*********************************************************	
			
			if(event.getSource() == itemCrearVehiculo){
				
				JPrincipal.this.setVisible(false);
				VentanaCrearVehiculo.getInstance().setVisible(true);
				//Controlador.getInstance().action(EventoNegocio.CREAR_VEHICULO, null);	
			}
			if(event.getSource() == itemBorrarVehiculo){
				JPrincipal.this.setVisible(false);
				VentanaBorrarVehiculo.getInstance().setVisible(true);
			}
			
			if(event.getSource()== itemModificaVehiculo){
				JPrincipal.this.setVisible(false);
				VentanaBuscarVehiculo.getInstance().setTipoEventoGUI(EventoGUI.BUSCA_VEHICULO_PARA_MODIFICAR);
				VentanaBuscarVehiculo.getInstance().estadoVentanaInicial();
				VentanaBuscarVehiculo.getInstance().setVisible(true);
			}
			
			if( event.getSource() == itemMostrarVehiculo){
				
				JPrincipal.this.setVisible(false);
				VentanaBuscarVehiculo.getInstance().setTipoEventoGUI(EventoGUI.BUSCAR_VEHICULO);
				VentanaBuscarVehiculo.getInstance().estadoVentanaInicial();
				VentanaBuscarVehiculo.getInstance().setVisible(true);
			} 
			if(event.getSource() == itemListarVehiculos){
				JPrincipal.this.setVisible(false);
				Controlador.getInstance().action(EventoNegocio.LISTAR_VEHICULOS, null);
				
			}
			//*******************EVENTOS DE SOCIO*******************
			//*********************************************************	
			
			if(event.getSource() == itemBorrarSocio){
				JPrincipal.this.setVisible(false);
				VentanaBorrarSocio.getInstance().setVisible(true);
				
			}

			if(event.getSource() == itemCrearSocio){
				JPrincipal.this.setVisible(false);
				VentanaCrearSocio.getInstance().setVisible(true);
			}

			if(event.getSource() == itemListarSocios){
				JPrincipal.this.setVisible(false);
				Controlador.getInstance().action(EventoNegocio.LISTAR_SOCIO, null);
			}
			
			if(event.getSource() == itemModificaSocio){
				JPrincipal.this.setVisible(false);
				VentanaBuscarSocio.getInstance().setTipoEventoGUI(EventoGUI.BUSCA_SOCIO_PARA_MODIFICAR);
				VentanaBuscarSocio.getInstance().setVisible(true);
			}
			
			if(event.getSource() == itemMostrarSocio){
				JPrincipal.this.setVisible(false);
				VentanaBuscarSocio.getInstance().setTipoEventoGUI(EventoGUI.BUSCAR_SOCIO);
				VentanaBuscarSocio.getInstance().setVisible(true);
			}
			
			//*******************EVENTOS DE RESERVA*******************
			//*********************************************************	
			
			
			if(event.getSource() == itemCrearReserva){
				JPrincipal.this.setVisible(false);
				VentanaCrearReserva.getInstance().setVisible(true);
			}
			if(event.getSource() == itemBorrarReserva){
				JPrincipal.this.setVisible(false);
				VentanaBorrarReserva.getInstance().setVisible(true);
			}
			
			if(event.getSource() == itemListarReservas){
				JPrincipal.this.setVisible(false);
				Controlador.getInstance().action(EventoNegocio.LISTAR_RESERVA, null);
			}
			if(event.getSource() == itemModificaReserva){
				JPrincipal.this.setVisible(false);
				VentanaBuscarReserva.getInstance().setTipoEventoGUI(EventoGUI.BUSCA_RESERVA_PARA_MODIFICAR);
				VentanaBuscarReserva.getInstance().estadoVentanaInicial();
				VentanaBuscarReserva.getInstance().setVisible(true);
			}			
			if(event.getSource() == itemMostrarReserva){
				JPrincipal.this.setVisible(false);
				VentanaBuscarReserva.getInstance().setTipoEventoGUI(EventoGUI.BUSCAR_RESERVA);
				VentanaBuscarReserva.getInstance().estadoVentanaInicial();
				VentanaBuscarReserva.getInstance().setVisible(true);
			}
			if (event.getSource() == itemActualizarReservas){
				Controlador.getInstance().action(EventoNegocio.ACTUALIZAR_RESERVAS, null);
			}
		}
	}
	
	public void actualiza(int evento, TReserva datos) {
		switch (evento) {
			case (EventoGUI.RESERVAS_ACTUALIZADAS):{
				JOptionPane.showMessageDialog(null, "Reservas actualizadas correctamente.");
			}break;
			
			case (EventoGUI.ACTUALIZACION_ERROR):{
				JOptionPane.showMessageDialog(null, "ERROR al actualizar las reservas.");
			}break;
		}
	}
}
